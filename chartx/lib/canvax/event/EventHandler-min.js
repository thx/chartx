define("canvax/event/EventHandler",["canvax/core/Base","ontouchstart"in window?"canvax/event/handler/touch":"canvax/event/handler/mouse","canvax/display/Point","canvax/event/CanvaxEvent"],function(a,b,c,d){var e=function(a){this.canvax=a,this.curPoints=[new c(0,0)],this.curPointsTarget=[],this._touching=!1,this._draging=!1,this._cursor="default"};return a.creatClass(e,b,{__dispatchEventInChilds:function(a,b){if(!(b||"length"in b))return!1;var c=this,e=!1;return _.each(b,function(b,f){if(b){e=!0;var g=new d(a);g.target=g.currentTarget=b||this,g.stagePoint=c.curPoints[f],g.point=g.target.globalToLocal(g.stagePoint),b.dispatchEvent(g)}}),e},_clone2hoverStage:function(a,b){var c=this,d=c.canvax,e=d._hoverStage.getChildById(a.id);return e||(e=a.clone(!0),e._transform=a.getConcatenatedMatrix(),d._hoverStage.addChildAt(e,0)),e.context.visible=!0,e._dragPoint=a.globalToLocal(c.curPoints[b]),e},_dragHander:function(a,b,d){var e=this,f=e.canvax,g=f._hoverStage.getChildById(b.id),h=new c(e.curPoints[d].x-g._dragPoint.x,e.curPoints[d].y-g._dragPoint.y);g.context.x=h.x,g.context.y=h.y,b.drag&&b.drag(a);var i=h;"stage"!=b.type&&b.parent&&"stage"!=b.parent.type&&(i=b.parent.globalToLocal(h)),b._notWatch=!0,b.context.x=i.x,b.context.y=i.y,b._notWatch=!1},_dragEnd:function(a,b,c){var d=this,e=d.canvax,f=e._hoverStage.getChildById(b.id);b.context.visible=!0,f.destroy()}}),e});