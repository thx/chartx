define("canvax/geom/SmoothSpline",["canvax/geom/Vector"],function(a){function b(a,b,c,d,e,f,g){var h=.5*(c-a),i=.5*(d-b);return(2*(b-c)+h+i)*g+(-3*(b-c)-2*h-i)*f+h*e+b}return function(c){var d=c.points,e=c.isLoop,f=c.smoothFilter,g=d.length;if(1==g)return d;for(var h=[],i=0,j=new a(d[0]),k=null,l=1;g>l;l++)k=new a(d[l]),i+=j.distance(k),j=k;j=null,k=null;var m=i/6;m=g>m?g:m;for(var l=0;m>l;l++){var n,o,p,q=l/(m-1)*(e?g:g-1),r=Math.floor(q),s=q-r,t=d[r%g];e?(n=d[(r-1+g)%g],o=d[(r+1)%g],p=d[(r+2)%g]):(n=d[0===r?r:r-1],o=d[r>g-2?g-1:r+1],p=d[r>g-3?g-1:r+2]);var u=s*s,v=s*u,w=[b(n[0],t[0],o[0],p[0],s,u,v),b(n[1],t[1],o[1],p[1],s,u,v)];_.isFunction(f)&&f(w),h.push(w)}return h}});