define("chartx/components/datazoom/index",["canvax/index","canvax/shape/Rect","canvax/shape/Line"],function(a,b,c){var d=function(a){this.range={start:0,end:1,max:"",min:2},this.count=1,this.pos={x:0,y:0},this.left={eventEnabled:!0},this.right={eventEnabled:!0},this.center={fillStyle:"#ffffff",globalAlpha:0},this.w=0,this.h=40,this.color="#008ae6",this.bg={enabled:!0,fillStyle:"",strokeStyle:"#e6e6e6",lineWidth:1},this.underline={enabled:!0,strokeStyle:this.color,lineWidth:2},this.dragIng=function(){},this.dragEnd=function(){},a&&_.deepExtend(this,a),this.range.max||(this.range.max=this.count),this.range.end>this.count&&(this.range.end=this.count),this.disPart=this._getDisPart(),this.barAddH=8,this.barH=this.h-this.barAddH,this.barY=3,this.btnW=8,this.btnFillStyle=this.color,this._btnLeft=null,this._btnRight=null,this._underline=null,this.init()};return d.prototype={init:function(){var b=this;b.sprite=new a.Display.Sprite({id:"dataZoom",context:{x:b.pos.x,y:b.pos.y}}),b.dataZoomBg=new a.Display.Sprite({id:"dataZoomBg"}),b.dataZoomBtns=new a.Display.Sprite({id:"dataZoomBtns"}),b.sprite.addChild(b.dataZoomBg),b.sprite.addChild(b.dataZoomBtns),b.widget(),b._setLines()},widget:function(){var c=this;if(c.bg.enabled){var d=new b({context:{x:0,y:c.barY,width:c.w,height:c.barH,lineWidth:c.bg.lineWidth,strokeStyle:c.bg.strokeStyle,fillStyle:c.bg.fillStyle}});c.dataZoomBg.addChild(d)}c.underline.enabled&&(c._underline=c._addLine({xStart:c.range.start/c.count*c.w+c.btnW/2,yStart:c.barY+c.barH+2,xEnd:c.range.end/c.count*c.w-c.btnW/2,yEnd:c.barY+c.barH+2,lineWidth:c.underline.lineWidth,strokeStyle:c.underline.strokeStyle}),c.dataZoomBg.addChild(c._underline)),this._btnLeft=new b({id:"btnLeft",dragEnabled:this.left.eventEnabled,context:{x:this.range.start/this.count*this.w,y:this.barY-this.barAddH/2+1,width:this.btnW,height:this.barH+this.barAddH,fillStyle:this.btnFillStyle,cursor:this.left.eventEnabled&&"move"}}),this._btnLeft.on("draging",function(){this.context.y=c.barY-c.barAddH/2+1,this.context.x<0&&(this.context.x=0),this.context.x>c._btnRight.context.x-c.btnW-2&&(this.context.x=c._btnRight.context.x-c.btnW-2),c._btnRight.context.x+c.btnW-this.context.x>c.disPart.max&&(this.context.x=c._btnRight.context.x+c.btnW-c.disPart.max),c._btnRight.context.x+c.btnW-this.context.x<c.disPart.min&&(this.context.x=c._btnRight.context.x+c.btnW-c.disPart.min),c.rangeRect.context.width=c._btnRight.context.x-this.context.x-c.btnW,c.rangeRect.context.x=this.context.x+c.btnW,c._setRange()}),this._btnLeft.on("dragend",function(){c.dragEnd(c.range)}),this._btnRight=new b({id:"btnRight",dragEnabled:this.right.eventEnabled,context:{x:this.range.end/this.count*this.w-this.btnW,y:this.barY-this.barAddH/2+1,width:this.btnW,height:this.barH+this.barAddH,fillStyle:this.btnFillStyle,cursor:this.right.eventEnabled&&"move"}}),this._btnRight.on("draging",function(){this.context.y=c.barY-c.barAddH/2+1,this.context.x>c.w-c.btnW&&(this.context.x=c.w-c.btnW),this.context.x+c.btnW-c._btnLeft.context.x>c.disPart.max&&(this.context.x=c.disPart.max-(c.btnW-c._btnLeft.context.x)),this.context.x+c.btnW-c._btnLeft.context.x<c.disPart.min&&(this.context.x=c.disPart.min-(c.btnW-c._btnLeft.context.x)),c.rangeRect.context.width=this.context.x-c._btnLeft.context.x-c.btnW,c._setRange()}),this._btnRight.on("dragend",function(){c.dragEnd(c.range)}),this.rangeRect=new b({id:"btnCenter",dragEnabled:!0,context:{x:this._btnLeft.context.x+c.btnW,y:this.barY+1,width:this._btnRight.context.x-this._btnLeft.context.x-c.btnW,height:this.barH-1,fillStyle:c.center.fillStyle,globalAlpha:c.center.globalAlpha,cursor:"move"}}),this.rangeRect.on("draging",function(a){this.context.y=c.barY+1,this.context.x<c.btnW&&(this.context.x=c.btnW),this.context.x>c.w-this.context.width-c.btnW&&(this.context.x=c.w-this.context.width-c.btnW),c._btnLeft.context.x=this.context.x-c.btnW,c._btnRight.context.x=this.context.x+this.context.width,c._setRange()}),this.rangeRect.on("dragend",function(){c.dragEnd(c.range)}),this.linesLeft=new a.Display.Sprite({id:"linesLeft"}),this.left.eventEnabled&&this._addLines({sprite:this.linesLeft}),this.linesRight=new a.Display.Sprite({id:"linesRight"}),this.right.eventEnabled&&this._addLines({sprite:this.linesRight}),this.linesCenter=new a.Display.Sprite({id:"linesCenter"}),this._addLines({count:6,sprite:this.linesCenter,strokeStyle:this.btnFillStyle}),this.dataZoomBtns.addChild(this.rangeRect),this.dataZoomBtns.addChild(this.linesCenter),this.dataZoomBtns.addChild(this._btnLeft),this.dataZoomBtns.addChild(this._btnRight),this.dataZoomBtns.addChild(this.linesLeft),this.dataZoomBtns.addChild(this.linesRight)},_getDisPart:function(){var a=this;return{min:a.range.min/a.count*a.w,max:a.range.max/a.count*a.w}},_setRange:function(){var a=this,b=a._btnLeft.context.x/a.w*a.count,c=(a._btnRight.context.x+a.btnW)/a.w*a.count;a.range.start=b,a.range.end=c,a.dragIng(a.range),a._setLines()},_setLines:function(){var a=this,b=a.dataZoomBtns.getChildById("linesLeft"),c=a.dataZoomBtns.getChildById("linesRight"),d=a.dataZoomBtns.getChildById("linesCenter"),e=a.dataZoomBtns.getChildById("btnLeft"),f=a.dataZoomBtns.getChildById("btnRight"),g=a.dataZoomBtns.getChildById("btnCenter");b.context.x=e.context.x+(e.context.width-b.context.width)/2,b.context.y=e.context.y+(e.context.height-b.context.height)/2,c.context.x=f.context.x+(f.context.width-c.context.width)/2,c.context.y=f.context.y+(f.context.height-c.context.height)/2,d.context.x=g.context.x+(g.context.width-d.context.width)/2,d.context.y=g.context.y+(g.context.height-d.context.height)/2,a.underline.enabled&&(a._underline.context.xStart=a.range.start/a.count*a.w+a.btnW/2,a._underline.context.xEnd=a.range.end/a.count*a.w-a.btnW/2)},_addLines:function(a){for(var b=this,c=a.count||2,d=a.sprite,e=a.dis||2,f=0,g=c;g>f;f++)d.addChild(b._addLine({x:f*e,strokeStyle:a.strokeStyle||""}));d.context.width=f*e-1,d.context.height=6},_addLine:function(a){var b=a||{},d=new c({id:b.id||"",context:{x:b.x||0,y:b.y||0,xStart:b.xStart||0,yStart:b.yStart||0,xEnd:b.xEnd||0,yEnd:b.yEnd||6,lineWidth:b.lineWidth||1,strokeStyle:b.strokeStyle||"#ffffff"}});return d}},d});